/*!
 * scroll-watcher - v0.5.0
 * A lightweight, blazing fast, rAF based, scroll watcher.
 * https://github.com/jonataswalker/scroll-watcher
 * Built: Mon Dec 12 2016 16:32:17 GMT-0200 (BRST)
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.ScrollWatcher=e()}(this,function(){"use strict";function t(){}function e(t,e){return e={exports:{}},t(e,e.exports),e.exports}t.prototype={on:function(t,e,n){var o=this.e||(this.e={});return(o[t]||(o[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){function o(){i.off(t,o),e.apply(n,arguments)}var i=this;return o._=e,this.on(t,o,n)},emit:function(t){var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),o=0,i=n.length;for(o;o<i;o++)n[o].fn.apply(n[o].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),o=n[t],i=[];if(o&&e)for(var r=0,s=o.length;r<s;r++)o[r].fn!==e&&o[r].fn._!==e&&i.push(o[r]);return i.length?n[t]=i:delete n[t],this}};for(var n=t,o=({$:function(t){return t="#"===t[0]?t.substr(1,t.length):t,document.getElementById(t)},isElement:function(t){return"HTMLElement"in window?!!t&&t instanceof HTMLElement:!!t&&"object"==typeof t&&1===t.nodeType&&!!t.nodeName},evaluate:function(t){var e;switch(this.toType(t)){case"window":case"htmldocument":case"element":e=t;break;case"string":t="#"===t[0]||"."===t[0]?t:"#"+t,e=this.find(t)}return e},toType:function(t){return t===window&&t.document&&t.location?"window":t===document?"htmldocument":"string"==typeof t?"string":this.isElement(t)?"element":void 0},find:function(t,e,n){void 0===e&&(e=window.document);var o=/^(#?[\w-]+|\.[\w-.]+)$/,i=/\./g,r=Array.prototype.slice,s=[];if(o.test(t))switch(t[0]){case"#":s=[this.$(t.substr(1))];break;case".":s=r.call(e.getElementsByClassName(t.substr(1).replace(i," ")));break;default:s=r.call(e.getElementsByTagName(t))}else s=r.call(e.querySelectorAll(t));return n?s:s[0]},mergeOptions:function(t,e){var n={};for(var o in t)n[o]=t[o];for(var i in e)n[i]=e[i];return n},isDefAndNotNull:function(t){return null!=t},assertEqual:function(t,e,n){if(t!==e)throw new Error(n+" mismatch: "+t+" != "+e)},assert:function(t,e){if(void 0===e&&(e="Assertion failed"),!t){if("undefined"!=typeof Error)throw new Error(e);throw e}},now:function(){if("performance"in window==!1&&(window.performance={}),Date.now=Date.now||function(){return(new Date).getTime()},"now"in window.performance==!1){var t=Date.now();performance.timing&&performance.timing.navigationStart&&(t=performance.timing.navigationStart),window.performance.now=function(){return Date.now()-t}}return window.performance.now()},offset:function(t){var e=t.getBoundingClientRect(),n=document.documentElement;return{left:e.left+window.pageXOffset-n.clientLeft,top:e.top+window.pageYOffset-n.clientTop,width:t.offsetWidth,height:t.offsetHeight}},getScroll:function(){return[window.pageXOffset||document.documentElement&&document.documentElement.scrollLeft||document.body.scrollLeft,window.pageYOffset||document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop]},getViewportSize:function(){return{w:window.innerWidth||document.documentElement.clientWidth,h:window.innerHeight||document.documentElement.clientHeight}},getDocumentHeight:function(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight)}}),i="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},r=e(function(t){(function(){var e,n,o;"undefined"!=typeof performance&&null!==performance&&performance.now?t.exports=function(){return performance.now()}:"undefined"!=typeof process&&null!==process&&process.hrtime?(t.exports=function(){return(e()-o)/1e6},n=process.hrtime,e=function(){var t;return t=n(),1e9*t[0]+t[1]},o=e()):Date.now?(t.exports=function(){return Date.now()-o},o=Date.now()):(t.exports=function(){return(new Date).getTime()-o},o=(new Date).getTime())}).call(i)}),s=r,a="undefined"==typeof window?i:window,l=["moz","webkit"],c="AnimationFrame",u=a["request"+c],f=a["cancel"+c]||a["cancelRequest"+c],p=0;!u&&p<l.length;p++)u=a[l[p]+"Request"+c],f=a[l[p]+"Cancel"+c]||a[l[p]+"CancelRequest"+c];if(!u||!f){var w=0,d=0,m=[],h=1e3/60;u=function(t){if(0===m.length){var e=s(),n=Math.max(0,h-(e-w));w=n+e,setTimeout(function(){var t=m.slice(0);m.length=0;for(var e=0;e<t.length;e++)if(!t[e].cancelled)try{t[e].callback(w)}catch(t){setTimeout(function(){throw t},0)}},Math.round(n))}return m.push({handle:++d,callback:t,cancelled:!1}),d},f=function(t){for(var e=0;e<m.length;e++)m[e].handle===t&&(m[e].cancelled=!0)}}var g=function(t){return u.call(a,t)},y=function(){f.apply(a,arguments)},v=function(){a.requestAnimationFrame=u,a.cancelAnimationFrame=f};g.cancel=y,g.polyfill=v;var b={PAGELOAD:"page:load",SCROLLING:"scrolling",ENTER:"enter",FULL_ENTER:"enter:full",EXIT_PARTIAL:"exit:partial",EXIT:"exit"},E={top:0,bottom:0},I=function(t){this.Base=t,this.lastXY=[],this.watching={},this.viewport=o.getViewportSize(),this.loopBound=this.loop.bind(this),this.loopBound(),this.setListeners()};I.prototype.loop=function(){var t=this;if(this.lastXY.join()===o.getScroll().join())return g(this.loopBound),!1;var e=o.getScroll(),n=e[1]>this.lastXY[1];this.lastXY=e;var i={scrollX:this.lastXY[0],scrollY:this.lastXY[1],scrollingDown:n,scrollingUp:!n};this.Base.emit(b.SCROLLING,i),Object.keys(this.watching).forEach(function(e){var n=t.watching[e];t.recalculate(n),i.target=n.node,n.isInViewport&&!n.wasInViewport&&(n.wasInViewport=!0,n.wasFullyOut=!1,n.emitter.emit(b.ENTER,i)),n.isFullyOut&&!n.wasFullyOut&&(n.wasFullyOut=!0,n.wasInViewport=!1,n.emitter.emit(b.EXIT,i)),n.isPartialOut&&!n.wasPartialOut&&(n.wasPartialOut=!0,n.wasFullyInViewport=!1,n.emitter.emit(b.EXIT_PARTIAL,i)),n.isFullyInViewport&&!n.wasFullyInViewport&&(n.wasFullyInViewport=!0,n.wasPartialOut=!1,n.emitter.emit(b.FULL_ENTER,i))}),g(this.loopBound)},I.prototype.recalculate=function(t){var e={top:t.dimensions.top+t.offset.top,bottom:t.dimensions.top+t.offset.bottom+t.dimensions.height},n={top:this.lastXY[1],bottom:this.lastXY[1]+this.viewport.h};t.isAboveViewport=e.top<n.top,t.isBelowViewport=e.bottom>n.bottom,t.isInViewport=e.top<=n.bottom&&e.bottom>=n.top,t.isFullyInViewport=e.top>=n.top&&e.bottom<=n.bottom||t.isAboveViewport&&t.isBelowViewport,t.isPartialOut=t.wasFullyInViewport&&!t.isFullyInViewport,t.isFullyOut=!t.isInViewport&&t.wasInViewport},I.prototype.setListeners=function(){var t=this,e=function e(n){if("undefined"!=typeof document)switch(document.readyState){case"loading":case"interactive":break;case"complete":t.Base.emit(b.PAGELOAD,{scrollX:t.lastXY[0],scrollY:t.lastXY[1]}),document.removeEventListener("readystatechange",e)}},n=function(e){t.viewport=o.getViewportSize()};document.addEventListener("readystatechange",e,!1),window.addEventListener("resize",n,!1)};var O=function(t){function e(){return this instanceof e?(t.call(this),this.counter=0,void(e.Internal=new I(this))):new e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.watch=function(n,i){function r(t){t.isInViewport=!1,t.wasInViewport=!1,t.isAboveViewport=!1,t.wasAboveViewport=!1,t.isBelowViewport=!1,t.wasBelowViewport=!1,t.isPartialOut=!1,t.wasPartialOut=!1,t.isFullyOut=!1,t.wasFullyOut=!1,t.isFullyInViewport=!1,t.wasFullyInViewport=!1}o.assert("string"==typeof n||o.isElement(n),"@param `element` should be string type or DOM Element!"),o.assert("number"==typeof i||"object"==typeof i||"undefined"==typeof i,"@param `opt_offset` should be number or Object or undefined!");var s,a=++this.counter,l=new t,c=o.evaluate(n);return o.assert(o.isElement(c),"Couldn't evaluate ("+n+") to a valid DOM node"),s="number"==typeof i?{top:i,bottom:i}:o.mergeOptions(E,i),e.Internal.watching[a]={node:c,emitter:l,offset:s,dimensions:o.offset(c)},r(e.Internal.watching[a]),{target:c,update:function(){r(e.Internal.watching[a]),e.Internal.watching[a].dimensions=o.offset(c)},once:function(t,e){return l.once(t,e,this),this},on:function(t,e){return l.on(t,e,this),this},off:function(t,e){return l.off(t,e,this),this}}},e.prototype.windowAtBottom=function(t){void 0===t&&(t=0);var n=e.Internal.lastXY[1],i=e.Internal.viewport.h;return t=parseInt(t,10),n+i>=o.getDocumentHeight()-t},e.prototype.windowAtTop=function(t){void 0===t&&(t=0);var n=e.Internal.lastXY[1];return t=parseInt(t,10),n<=t},e}(n);return O});
//# sourceMappingURL=scroll-watcher.min.js.map